/* --- General Styles --- */
body {
    font-family: 'Kantumruy Pro', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

/* --- Dropdown Scrollbar --- */
.dropdown-list {
    scrollbar-width: thin;
    scrollbar-color: #9ca3af #f3f4f6;
}
.dropdown-list::-webkit-scrollbar {
    width: 6px;
}
.dropdown-list::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 10px;
}
.dropdown-list::-webkit-scrollbar-thumb {
    background-color: #9ca3af;
    border-radius: 10px;
    border: 2px solid #f3f4f6;
}

/* --- Loading Spinner --- */
.spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border-left-color: #09f;
    animation: spin 1s ease infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* --- Page Min Height --- */
#page-request-leave, #page-request-out {
    min-height: 100vh;
}

/* === START: MODIFICATION (History Tab Redesign) === */

/* Old border-bottom style (Removed) */
/*
.history-tab.active { ... }
.history-tab { ... }
*/

/* New Segmented Control Style for History Page */
.history-tab {
    /* Default (inactive) state */
    color: #374151; /* gray-700 */
    background-color: transparent;
}
.history-tab.active {
    /* Active state */
    color: #1e40af; /* blue-800 */
    background-color: #ffffff; /* white */
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
}
/* === END: MODIFICATION (History Tab Redesign) === */


/* === START: Approver Tab Styles (Kept) === */
/* Style សម្រាប់ Approver Tabs (រក្សាភាពស៊ីគ្នា) */
.approver-tab {
    border-bottom-width: 3px;
    border-color: transparent;
    color: #6b7280; /* gray-500 for inactive */
    transition: color 0.2s ease, border-color 0.2s ease;
}
/* Active style for Approver tabs (Admin-facing) */
.approver-tab.active {
    border-color: #ef4444; /* red-500 */
    color: #ef4444;
}
/* === END: Approver Tab Styles === */


/* --- Face Scan Styles --- */
.scan-overlay {
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    width: 70%;
    height: 85%;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

#video, #return-video {
    transform: scaleX(-1);
    will-change: transform;
    object-fit: cover;
}


/* === START: REMOVED (Attendance Page Styles) === */
/*
#page-daily-attendance { ... }
#attendance-iframe-container { ... }
#attendance-iframe { ... }
*/
/* === END: REMOVED (Attendance Page Styles) === */


/* === START: Bottom Nav Active Style (Kept) === */
.nav-btn {
    transition: color 0.2s ease, transform 0.1s ease;
}
/* This applies the 'pop' effect when Tailwind adds the 'text-blue-600' class via JS */
.nav-btn.text-blue-600 {
    transform: scale(1.1);
}
/* === END: Bottom Nav Active Style === */











/* === START: NEW Frosted Glass Redesign (V3 - Clear BG) === */

/* 1. ផ្ទៃខាងក្រោយ (Background Image) - អនុវត្តតែលើ #main-app-container */
/* (Requirement 1 & 3: រូបភាពច្បាស់) */

#main-app-container {
    position: relative;
    background: transparent !important; 
    overflow: hidden; 
}

/* (ជំនួស Block នេះ) */
#main-app-container::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1; 
    
    background-image: url('https://i.postimg.cc/FRwXZGjn/Artboard-1.png');
    
    /* === START: ការផ្លាស់ប្តូរ (V4) តាមសំណើ === */
    background-size: contain;     /* ប្តូរពី 'cover' ទៅ 'contain' */
    background-repeat: no-repeat; /* ធានាថារូបភាពមិនច្រំដែល */
    /* === END: ការផ្លាស់ប្តូរ (V4) === */
    
    background-position: center;
    background-attachment: fixed; 
}

/* 2. ធ្វើឲ្យអក្សរងាយស្រួលអាន (Heavy Stoke) (Requirement 3) */
/* អនុវត្ត "Stoke" ធ្ងន់ៗ ទៅលើអក្សរទាំងអស់ នៅក្នុង Main App */
#main-app-container {
    text-shadow: 
        -1px -1px 3px rgba(0,0,0,0.8), 
         1px -1px 3px rgba(0,0,0,0.8), 
        -1px  1px 3px rgba(0,0,0,0.8), 
         1px  1px 3px rgba(0,0,0,0.8),
         0 0 5px rgba(0,0,0,0.5); /* ធ្វើឲ្យវា nổi ជាងមុន */
}

/* 3. ប្រអប់កញ្ចក់ថ្លា (Frosted Glass Effect) (Requirement 2) */
/* យើងប្តូរទៅជា "កញ្ចក់ពណ៌ខ្មៅ" ថ្លា (Dark Glass) ព្រោះវាស្អាតជាង ពេលផ្ទៃខាងក្រោយច្បាស់ */

/* --- Home Page --- */
#main-app-container #page-home button.bg-blue-50,
#main-app-container #page-home button.bg-green-50,
#main-app-container #page-home button.bg-red-50,
#main-app-container #page-home .bg-white { /* ប្រអប់ "អ្នកអនុញ្ញាត" */
    background-color: rgba(0, 0, 0, 0.2) !important; /* កញ្ចក់ខ្មៅ 20% */
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    transition: background-color 0.2s ease;
}

/* Hover states */
#main-app-container #page-home button.bg-blue-50:hover,
#main-app-container #page-home button.bg-green-50:hover,
#main-app-container #page-home button.bg-red-50:hover {
    background-color: rgba(0, 0, 0, 0.35) !important;
}

/* --- Account & Help Page --- */
#main-app-container #page-account .bg-white,
#main-app-container #page-help .bg-white,
#main-app-container #page-help .bg-gray-50 {
    background-color: rgba(0, 0, 0, 0.2) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* --- History Page --- */
#main-app-container #page-history {
    background-color: transparent !important; 
}
/* ប្រអប់ Tabs (Leave/Out) */
#main-app-container #page-history .bg-gray-200 { 
    background-color: rgba(0, 0, 0, 0.3) !important; /* របារខ្មៅថ្លា 30% */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
/* Tab ที่ Active */
#main-app-container #page-history .history-tab.active {
     background-color: rgba(255, 255, 255, 0.9) !important; 
     color: #1e40af !important; 
     /* ដក Stroke ចេញ ពេលនៅផ្ទៃស */
     text-shadow: none !important; 
}
/* Tab ที่ Inactive */
#main-app-container #page-history .history-tab {
    color: #f1f5f9; 
}
/* ប្រអប់ Card នីមួយៗ (ដែលបង្កើតដោយ JS) */
#main-app-container #history-content .bg-white {
    background-color: rgba(0, 0, 0, 0.2) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* --- Form Pages (Leave/Out) & Approver Page --- */
#main-app-container #page-request-leave, 
#main-app-container #page-request-out,
#main-app-container #page-approver {
     background-color: transparent !important;
}
/* ប្រអប់ព័ត៌មាន User & Approver Cards */
#main-app-container #page-request-leave .bg-white,
#main-app-container #page-request-out .bg-white,
#main-app-container #page-approver .bg-white { 
    background-color: rgba(0, 0, 0, 0.2) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* --- Inputs & Dropdowns (Scoped to Main App) --- */
#main-app-container input[type="text"],
#main-app-container input[type="date"],
#main-app-container .dropdown-list {
    background-color: rgba(0, 0, 0, 0.25) !important; /* ផ្ទៃខ្មៅ ថ្លា */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: #f1f5f9 !important; /* ពណ៌អក្សរ ពេលវាយ */
}
#main-app-container input[type="text"]::placeholder { 
    color: #cbd5e1 !important;
    opacity: 1; 
}
#main-app-container .dropdown-list .px-4.py-2 {
     background-color: transparent !important;
     color: #e2e8f0 !important;
}
#main-app-container .dropdown-list .px-4.py-2.hover\:bg-gray-100:hover {
     background-color: rgba(255, 255, 255, 0.1) !important;
}
#main-app-container input:disabled {
    background-color: rgba(0, 0, 0, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: #94a3b8 !important;
}

/* --- Modals (ផ្ទាំង Pop-up) - លើកលែង Face Scan ពេល Login --- */
/* (Requirement 3: ប្រអប់សារផងដែល) */
#edit-modal .bg-white,
#delete-modal .bg-white,
#custom-alert-modal .bg-white,
#agreement-modal .bg-white,
#announcement-modal .bg-white,
#invoice-modal .bg-white,
#return-scan-modal .bg-white { /* នេះគឺជា Scan "ចូលវិញ" មិនមែន Login */
    background-color: rgba(0, 0, 0, 0.3) !important; /* កញ្ចក់ខ្មៅ 30% */
    backdrop-filter: blur(20px); /* ព្រិលជាងមុន */
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
}
/* ផ្ទៃខាងក្រោយខ្មៅ របស់ Modal (Backdrop) - លើកលែង Face Scan ពេល Login */
#edit-modal,
#delete-modal,
#custom-alert-modal,
#agreement-modal,
#announcement-modal,
#invoice-modal,
#return-scan-modal {
     background-color: rgba(0, 0, 0, 0.3) !important;
}

/* --- Bottom Navigation Bar --- */
#bottom-navigation {
    background-color: rgba(0, 0, 0, 0.2) !important; 
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* 4. កែពណ៌អក្សរ (Text Color Fixes) - Scoped to Main App */
/* បង្ខំអក្សរទាំងអស់ ឲ្យទៅជាពណ៌ស */
#main-app-container .text-gray-500, 
#main-app-container .text-gray-600, 
#main-app-container .text-gray-700, 
#main-app-container .text-gray-800, 
#main-app-container .text-gray-900,
#main-app-container .text-blue-800, 
#main-app-container .text-green-800, 
#main-app-container .text-red-800, 
#main-app-container .text-yellow-800, 
#main-app-container .text-indigo-700 {
    color: #f8fafc !important; /* ពណ៌ស ស្រាល */
}

/* លើកលែងតែពណ៌មួយចំនួន ដែលយើងចង់រក្សាไว้ */
#main-app-container .text-blue-600 { /* Active Nav */
     color: #60a5fa !important;
}
#main-app-container .text-red-500, 
#main-app-container .text-red-600 { /* Errors, Delete */
     color: #f87171 !important;
}
#main-app-container .text-green-700, 
#main-app-container .text-green-800 { /* Success, Approved */
     color: #86efac !important;
}

/* កែពណ៌ Status Pills ក្នុង History Page */
#main-app-container .bg-green-100.text-green-800 {
     background-color: rgba(74, 222, 128, 0.2) !important;
     color: #dcfce7 !important;
}
#main-app-container .bg-red-100.text-red-800 {
     background-color: rgba(248, 113, 113, 0.2) !important;
     color: #fee2e2 !important;
}
#main-app-container .bg-yellow-100.text-yellow-800 {
     background-color: rgba(250, 204, 21, 0.2) !important;
     color: #fef9c3 !important;
}
#main-app-container .bg-blue-100.text-blue-800 {
    background-color: rgba(96, 165, 250, 0.2) !important;
     color: #dbeafe !important;
}

/* === END: NEW Frosted Glass Redesign (V3) === */





/* === START: NEW (V4.1) Modal Text Color Fix === */

/* 5. កែពណ៌អក្សរក្នុងប្រអប់សារ (Modal Text Fix) */
/* បង្ខំអក្សរទាំងអស់ (h3, p, label) ក្នុង Modal ឲ្យទៅជាពណ៌ស */
#edit-modal .bg-white,
#delete-modal .bg-white,
#custom-alert-modal .bg-white,
#agreement-modal .bg-white,
#announcement-modal .bg-white,
#invoice-modal .bg-white,
#return-scan-modal .bg-white {
    color: #f8fafc !important; /* ពណ៌ស ស្រាល */
}

/* ធានាថា អក្សរ Error នៅតែក្រហមដដែល (សំខាន់) */
#main-app-container .text-red-500, 
#main-app-container .text-red-600 {
     color: #f87171 !important;
     /* យើងដក Stoke ចេញពីអក្សរ Error ដើម្បីឲ្យវាកាន់តែច្បាស់ */
     text-shadow: none !important; 
}

/* ធានាថា អក្សរ Success នៅតែបៃតងដដែល */
#main-app-container .text-green-700, 
#main-app-container .text-green-800,
#main-app-container .text-green-600 { /* បន្ថែម ឲ្យគ្របដណ្តប់ */
     color: #86efac !important;
}

/* === END: NEW (V4.1) Modal Text Color Fix === */
