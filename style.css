/* --- General Styles --- */
body {
    font-family: 'Kantumruy Pro', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

/* --- Dropdown Scrollbar --- */
.dropdown-list {
    scrollbar-width: thin;
    scrollbar-color: #9ca3af #f3f4f6;
}
.dropdown-list::-webkit-scrollbar {
    width: 6px;
}
.dropdown-list::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 10px;
}
.dropdown-list::-webkit-scrollbar-thumb {
    background-color: #9ca3af;
    border-radius: 10px;
    border: 2px solid #f3f4f6;
}

/* --- Loading Spinner --- */
.spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border-left-color: #09f;
    animation: spin 1s ease infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* --- Page Min Height --- */
#page-request-leave, #page-request-out {
    min-height: 100vh;
}

/* === START: MODIFICATION (History Tab Redesign) === */

/* Old border-bottom style (Removed) */
/*
.history-tab.active { ... }
.history-tab { ... }
*/

/* New Segmented Control Style for History Page */
.history-tab {
    /* Default (inactive) state */
    color: #374151; /* gray-700 */
    background-color: transparent;
}
.history-tab.active {
    /* Active state */
    color: #1e40af; /* blue-800 */
    background-color: #ffffff; /* white */
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
}
/* === END: MODIFICATION (History Tab Redesign) === */


/* === START: Approver Tab Styles (Kept) === */
/* Style សម្រាប់ Approver Tabs (រក្សាភាពស៊ីគ្នា) */
.approver-tab {
    border-bottom-width: 3px;
    border-color: transparent;
    color: #6b7280; /* gray-500 for inactive */
    transition: color 0.2s ease, border-color 0.2s ease;
}
/* Active style for Approver tabs (Admin-facing) */
.approver-tab.active {
    border-color: #ef4444; /* red-500 */
    color: #ef4444;
}
/* === END: Approver Tab Styles === */


/* --- Face Scan Styles --- */
.scan-overlay {
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
    width: 70%;
    height: 85%;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

#video, #return-video {
    transform: scaleX(-1);
    will-change: transform;
    object-fit: cover;
}


/* === START: REMOVED (Attendance Page Styles) === */
/*
#page-daily-attendance { ... }
#attendance-iframe-container { ... }
#attendance-iframe { ... }
*/
/* === END: REMOVED (Attendance Page Styles) === */


/* === START: Bottom Nav Active Style (Kept) === */
.nav-btn {
    transition: color 0.2s ease, transform 0.1s ease;
}
/* This applies the 'pop' effect when Tailwind adds the 'text-blue-600' class via JS */
.nav-btn.text-blue-600 {
    transform: scale(1.1);
}
/* === END: Bottom Nav Active Style === */











/* === START: NEW Frosted Glass Redesign (iOS Style) === */

/* 1. ផ្ទៃខាងក្រោយ (Background Image) */
/* យើងអនុវត្តវាទៅលើទំព័រ Login និងទំព័រ App  chính */
#page-login,
#main-app-container {
    position: relative;
    /* លុបផ្ទៃខាងក្រោយចាស់ចេញ (bg-gray-100 / bg-white) */
    background: transparent !important; 
    overflow: hidden; /* ធានាថា ::before មិនហៀរចេញ */
}

/* បង្កើត pseudo-element សម្រាប់ផ្ទុក background */
#page-login::before,
#main-app-container::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1; /* ដាក់វានៅខាងក្រោយគេបង្អស់ */
    
    /* រូបភាពផ្ទៃខាងក្រោយ (Requirement 1) */
    background-image: url('https://i.postimg.cc/FRwXZGjn/Artboard-1.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* ធ្វើឲ្យ BG នៅស្ងៀមពេល scroll */

    /* ធ្វើឲ្យងងឹត និង ព្រិល (Requirement 3) */
    /* យើងប្រើ filter សម្រាប់ព្រិល និង background-color សម្រាប់ធ្វើឲ្យងងឹត */
    filter: blur(4px); /* ព្រិល 4px */
    background-color: rgba(0, 0, 0, 0.3); /* ស្រទាប់ខ្មៅ 30% */
    
    transform: scale(1.05); /* ពង្រីកបន្តិច ដើម្បីកុំឲ្យឃើញគែមព្រិល */
}

/* 2. ធ្វើឲ្យអក្សរងាយស្រួលអាន (Text Stroke/Shadow) (Requirement 4) */
#page-login,
#main-app-container {
    /* បន្ថែមស្រមោល (shadow) ស្រាលៗ ទៅគ្រប់អក្សរ */
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
}

/* 3. ប្រអប់កញ្ចក់ថ្លា (Frosted Glass Effect) (Requirement 2) */

/* --- Login Page --- */
#login-form-container,
#data-loading-indicator {
    background-color: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px); /* សម្រាប់ Safari */
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 1rem; /* ធ្វើឲ្យវាโค้งมน */
}

/* --- Home Page --- */
/* ប៊ូតុងសុំច្បាប់ */
#page-home button.bg-blue-50,
#page-home button.bg-green-50,
#page-home button.bg-red-50 {
    background-color: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    transition: background-color 0.2s ease;
}
/* ប្រអប់ "អ្នកអនុញ្ញាត" */
#page-home .bg-white { 
    background-color: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* Hover states សម្រាប់ប៊ូតុងកញ្ចក់ */
#page-home button.bg-blue-50:hover,
#page-home button.bg-green-50:hover,
#page-home button.bg-red-50:hover {
    background-color: rgba(255, 255, 255, 0.25) !important;
}

/* --- Account & Help Page --- */
#page-account .bg-white,
#page-help .bg-white {
    background-color: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
}
#page-help .bg-gray-50 { /* Link ទំនាក់ទំនង */
     background-color: rgba(255, 255, 255, 0.1) !important;
     border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* --- History Page --- */
#page-history {
    background-color: transparent !important; /* Override bg-gray-50 */
}
/* ប្រអប់ Tabs (Leave/Out) */
#page-history .bg-gray-200 { 
    background-color: rgba(0, 0, 0, 0.2) !important; /* របារខ្មៅថ្លា */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
/* Tab ที่ Active */
#page-history .history-tab.active {
     background-color: rgba(255, 255, 255, 0.9) !important; /* ពណ៌ស ស្ទើរតែពេញ */
     color: #1e40af !important; /* រក្សាពណ៌អក្សរ Blue */
     text-shadow: none !important; /* ដក shadow ចេញ ពេលនៅផ្ទៃស */
}
/* Tab ที่ Inactive */
#page-history .history-tab {
    color: #f1f5f9; /* ពណ៌ស ស្រាល */
}
/* ប្រអប់ Card នីមួយៗ (ដែលបង្កើតដោយ JS) */
#history-content .bg-white {
    background-color: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* --- Form Pages (Leave/Out) --- */
#page-request-leave, #page-request-out {
     background-color: transparent !important; /* Override bg-gray-50 */
}
/* ប្រអប់ព័ត៌មាន User */
#page-request-leave .bg-white,
#page-request-out .bg-white { 
    background-color: rgba(255, 255, 255, 0.15) !important;
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* --- Inputs & Dropdowns --- */
input[type="text"],
input[type="date"],
.dropdown-list {
    background-color: rgba(0, 0, 0, 0.2) !important; /* ផ្ទៃខ្មៅ ថ្លា */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: #f1f5f9 !important; /* ពណ៌អក្សរ ពេលវាយ */
}
/* ពណ៌ Placeholder */
input[type="text"]::placeholder { 
    color: #cbd5e1 !important;
    opacity: 1; 
}
/* Dropdown items */
.dropdown-list .px-4.py-2 {
     background-color: transparent !important;
     color: #e2e8f0 !important;
}
.dropdown-list .px-4.py-2.hover\:bg-gray-100:hover {
     background-color: rgba(255, 255, 255, 0.1) !important;
}
/* Input ដែល Disabled */
input:disabled {
    background-color: rgba(0, 0, 0, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: #94a3b8 !important;
}

/* --- Modals (ផ្ទាំង Pop-up) --- */
/* ធ្វើឲ្យ Modals ភ្លឺជាង Card ធម្មតា ដើម្បីងាយស្រួល Focus */
#face-scan-modal .bg-white,
#edit-modal .bg-white,
#delete-modal .bg-white,
#custom-alert-modal .bg-white,
#agreement-modal .bg-white,
#announcement-modal .bg-white,
#invoice-modal .bg-white {
    background-color: rgba(255, 255, 255, 0.4) !important; /* ថ្លា 40% */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
}
/* ផ្ទៃខាងក្រោយខ្មៅ របស់ Modal (Backdrop) */
#face-scan-modal,
#return-scan-modal,
#edit-modal,
#delete-modal,
#custom-alert-modal,
#agreement-modal,
#announcement-modal,
#invoice-modal {
     /* ធ្វើឲ្យវាថ្លាជាងមុន ដើម្បីមើលឃើញ BG ខាងក្រោយ */
     background-color: rgba(0, 0, 0, 0.3) !important;
}

/* --- Bottom Navigation Bar --- */
#bottom-navigation {
    background-color: rgba(0, 0, 0, 0.2) !important; /* ផ្ទៃខ្មៅ ថ្លា */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* 4. កែពណ៌អក្សរ (Text Color Fixes) */
/* ដោយសារ BG ងងឹត, យើងត្រូវបង្ខំអក្សរភាគច្រើន ឲ្យទៅជាពណ៌ស */
/* នេះសំខាន់ណាស់ ព្រោះ Tailwind ប្រើ text-gray-800 ច្រើន */
.text-gray-500, .text-gray-600, .text-gray-700, .text-gray-800, .text-gray-900,
.text-blue-800, .text-green-800, .text-red-800, .text-yellow-800, .text-indigo-700 {
    color: #f8fafc !important; /* ពណ៌ស ស្រាល */
}

/* លើកលែងតែពណ៌មួយចំនួន ដែលយើងចង់រក្សាไว้ */
.text-blue-600 { /* Active Nav */
     color: #60a5fa !important;
}
.text-red-500, .text-red-600 { /* Errors, Delete */
     color: #f87171 !important;
}
.text-green-700, .text-green-800 { /* Success, Approved */
     color: #86efac !important;
}

/* កែពណ៌ Status Pills ក្នុង History Page */
.bg-green-100.text-green-800 {
     background-color: rgba(74, 222, 128, 0.2) !important;
     color: #dcfce7 !important;
}
.bg-red-100.text-red-800 {
     background-color: rgba(248, 113, 113, 0.2) !important;
     color: #fee2e2 !important;
}
.bg-yellow-100.text-yellow-800 {
     background-color: rgba(250, 204, 21, 0.2) !important;
     color: #fef9c3 !important;
}
.bg-blue-100.text-blue-800 {
    background-color: rgba(96, 165, 250, 0.2) !important;
     color: #dbeafe !important;
}

/* កែពណ៌អក្សរលើប៊ូតុង Login */
#login-form-container button {
    color: #f8fafc !important;
}

/* === END: NEW Frosted Glass Redesign === */
